/* ------------------------- */
/* --- Themes & Variables --- */
/* ------------------------- */
:root, [data-theme='light'] {
  --background-color: #f5f5f7;
  --card-background-color: #ffffff;
  --form-background-color: #f0f0f5;
  --text-color-primary: #1d1d1f;
  --text-color-secondary: #6e6e73;
  --separator-color: #d2d2d7;
  --shadow-color: rgba(0, 0, 0, 0.06);
  --hover-background-color: #ebebef;
  --apple-blue: #007aff;
  --apple-red: #ff3b30;
  --border-radius: 12px;
  --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
}

[data-theme='dark'] {
  --background-color: #000000;
  --card-background-color: #1c1c1e;
  --form-background-color: #2c2c2e;
  --text-color-primary: #ffffff;
  --text-color-secondary: #8e8e93;
  --separator-color: #3a3a3c;
  --shadow-color: rgba(0, 0, 0, 0.2);
  --hover-background-color: #2c2c2e;
}

/* ------------------------- */
/* --- Animations --- */
/* ------------------------- */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { transform: translateY(20px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

/* ------------------------- */
/* --- Base Styles --- */
/* ------------------------- */
body {
  margin: 0;
  font-family: var(--font-family);
  background-color: var(--background-color);
  color: var(--text-color-primary);
  transition: background-color 0.3s, color 0.3s;
}

.app-container {
  max-width: 680px;
  margin: 0 auto;
  padding: 3rem 1.5rem;
  animation: fadeIn 0.5s ease-in-out;
}

.app-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2.5rem;
}

.app-header h1 {
  font-size: 2.75rem;
  font-weight: 600;
  letter-spacing: -0.5px;
  margin: 0;
}

.theme-toggle {
  font-size: 1.5rem !important;
  color: var(--text-color-secondary);
}

/* ------------------------- */
/* --- Form Section --- */
/* ------------------------- */
.form-section, .task-item {
  animation: slideUp 0.5s ease-out;
  animation-fill-mode: backwards; /* Ensures element is not visible before animation starts */
}

.form-section {
  background: var(--card-background-color);
  padding: 1.5rem;
  border-radius: var(--border-radius);
  box-shadow: 0 4px 20px var(--shadow-color);
  margin-bottom: 2.5rem;
  transition: background-color 0.3s;
}

.form-section h2 {
  margin-top: 0;
  margin-bottom: 1.5rem;
  font-size: 1.5rem;
  font-weight: 600;
}

.task-form input, .task-form textarea {
  background-color: var(--form-background-color);
  color: var(--text-color-primary);
  border: 1px solid var(--separator-color);
  transition: border-color 0.2s, box-shadow 0.2s, background-color 0.3s;
}

/* Add staggered animation for task items */
.task-item:nth-child(2) { animation-delay: 0.05s; }
.task-item:nth-child(3) { animation-delay: 0.1s; }
.task-item:nth-child(4) { animation-delay: 0.15s; }
/* ...and so on */


/* --- Statically included from previous responses for completeness --- */

.task-form input:focus,
.task-form textarea:focus {
  outline: none;
  border-color: var(--apple-blue);
  box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.2);
}
.task-form input, .task-form textarea { width: 100%; padding: 12px; margin-bottom: 1rem; border-radius: 8px; font-size: 1rem; font-family: var(--font-family); box-sizing: border-box; }
.task-form textarea { min-height: 90px; resize: vertical; }
.form-actions { display: flex; gap: 0.75rem; margin-top: 0.5rem; }
.filter-section { display: flex; justify-content: center; margin-bottom: 2.5rem; }
.filter-buttons { display: flex; background-color: var(--form-background-color); border-radius: 8px; padding: 4px; transition: background-color 0.3s; }
.filter-buttons button { background-color: transparent; color: var(--text-color-primary); font-weight: 500; padding: 0.5rem 1rem; border-radius: 6px; transition: background-color 0.3s, color 0.3s, box-shadow 0.3s; }
.filter-buttons button.active { background-color: var(--card-background-color); color: var(--text-color-primary); box-shadow: 0 1px 4px var(--shadow-color); }
.task-list { display: flex; flex-direction: column; gap: 1rem; }
.task-item { display: flex; justify-content: space-between; align-items: center; background: var(--card-background-color); padding: 1rem 1.25rem; border-radius: var(--border-radius); box-shadow: 0 2px 10px var(--shadow-color); transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.3s; }
.task-item.completed h3 { text-decoration: line-through; color: var(--text-color-secondary); }
.task-content { display: flex; align-items: center; gap: 1rem; cursor: pointer; flex-grow: 1; min-width: 0; }
.task-status .checkbox { width: 24px; height: 24px; border: 2px solid var(--separator-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: all 0.2s; }
.task-item.completed .task-status .checkbox { background-color: var(--apple-blue); border-color: var(--apple-blue); }
.task-details { margin-right: 1rem; }
.task-details h3 { margin: 0 0 0.2rem 0; font-size: 1.1rem; font-weight: 500; }
.task-details p { margin: 0; font-size: 0.95rem; color: var(--text-color-secondary); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
button { border: none; cursor: pointer; font-size: 1rem; font-family: var(--font-family); background-color: transparent; }
.button-primary { background-color: var(--apple-blue); color: white; padding: 0.7rem 1.2rem; border-radius: 8px; font-weight: 500; transition: background-color 0.2s; }
.button-primary:hover { background-color: #0070e0; }
.button-secondary { background-color: var(--form-background-color); color: var(--text-color-primary); padding: 0.7rem 1.2rem; border-radius: 8px; font-weight: 500; transition: background-color 0.2s; }
.button-secondary:hover { background-color: var(--separator-color); }
.task-actions { display: flex; align-items: center; gap: 0.25rem; }
.icon-button { display: flex; align-items: center; justify-content: center; width: 36px; height: 36px; font-size: 1.1rem; color: var(--text-color-secondary); border-radius: 50%; transition: background-color 0.2s, color 0.2s; }
.icon-button:hover { background-color: var(--hover-background-color); }
.delete-button:hover { color: var(--apple-red); background-color: rgba(255, 59, 48, 0.1); }
.empty-message { text-align: center; color: var(--text-color-secondary); padding: 3rem; font-size: 1.1rem; }